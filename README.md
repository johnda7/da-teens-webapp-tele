# DA Teens - Адаптивная платформа психологического благополучия для подростков

[![Branch](https://img.shields.io/badge/branch-fsd--migration-blue)](https://github.com/johnda7/da-teens-webapp-tele/tree/fsd-migration)
[![Architecture](https://img.shields.io/badge/architecture-FSD-green)](docs/FOR_AGENTS.md)
[![Storage](https://img.shields.io/badge/storage-Google%20Sheets%20API-yellow)](docs/FOR_AGENTS.md)

Telegram Mini App с **адаптивной системой обучения** для развития эмоциональных навыков у подростков 13-18 лет.

> **⚠️ Важно:** Проект находится в процессе миграции на **FSD (Feature-Sliced Design)** архитектуру.  
> Текущая ветка: `fsd-migration` → будет слита в `main` после завершения тестирования.

## ✨ Что нового? (Октябрь 2025)

### 🏗️ FSD Архитектура (NEW!)
Современная архитектура для масштабируемых React приложений:
- **Централизованный шаблон модулей** - один компонент для всех 12 модулей
- **Feature-Sliced Design** - чёткое разделение на слои (shared → entities → features → widgets → pages → app)
- **DRY principle** - 12 модулей = 1 шаблон + 12 датасетов
- **Легко масштабировать** - добавление нового модуля = новый датасет

### 💾 Google Sheets API (FINAL решение)
Выбрано как оптимальное хранилище для MVP:
- **Простота** - визуальная админка из коробки
- **Бесплатно** - Google Sheets API без ограничений
- **AI-friendly** - агенты могут читать/писать данные одной командой
- **Нет бэкенда** - работает со статическим GitHub Pages

### 🧠 Адаптивная система обучения
Впервые в edtech: система, которая **учитывает эмоциональное состояние** при выборе урока!

- **Анализ чек-инов** - настроение, тревога, сон, энергия
- **Умный выбор урока** - на основе когнитивной нагрузки и готовности
- **Множественные форматы** - текст, видео, аудио, интерактив, mindmap
- **Персональные подсказки** - система объясняет, почему выбран этот урок

### 🎮 Psychologically-informed геймификация
- **XP система** с бонусами за постоянство
- **Forgiving streak** - 2 "freeze" дня (не наказываем за пропуски!)
- **15+ уникальных бейджей** - фокус на эмоциональном росте
- **Wellness Score** - холистическая метрика прогресса

### 📚 Полноценный модуль "Личные границы"
9 детальных уроков с прогрессией:
1. Что такое границы?
2. Признаки нарушений
3. Почему сложно сказать "нет"
4. Как говорить "нет" (практика)
5. Границы в семье
6. С друзьями и партнерами
7. Цифровые границы
8. Когда нарушают
9. Поддержание границ

## 🎯 Основные возможности

- **Адаптивное обучение** на основе эмоционального состояния (NEW! 🔥)
- **12 модулей развития** (по 3 недели каждый)
- **Ежедневные чек-ины** для отслеживания настроения, тревожности и сна
- **Умная геймификация** - XP, уровни, streak, бейджи
- **Множественные форматы** уроков под разные стили обучения
- **SOS-кнопка** для экстренной связи
- **Безопасная среда** с защитой данных

## 🛠 Технический стек

- **Frontend**: React 19 + TypeScript + Vite 6.3.6
- **Architecture**: FSD (Feature-Sliced Design)
- **UI Components**: shadcn/ui + Tailwind CSS 4.x
- **Icons**: Phosphor Icons (1,514 icons)
- **Charts**: Recharts
- **Storage**: Google Sheets API (production) / localStorage (dev)
- **Platform**: Telegram Mini App (@twa-dev/sdk)
- **Deployment**: GitHub Pages + GitHub Actions

## 🚀 Быстрый старт

### Для AI-агентов

**⚠️ ОБЯЗАТЕЛЬНО прочитай перед началом работы:**
- 📖 **[FOR_AGENTS.md](FOR_AGENTS.md)** - главный файл для всех AI-агентов (2,360 строк)
- 🏗️ **FSD архитектура** - централизованный шаблон модулей
- 💾 **Google Sheets решение** - FINAL выбор хранилища
- 🎨 **iOS 26 Liquid Glass** - дизайн-система

### Вариант 1: Используй готовую систему (рекомендуется!)

```bash
# 1. Установи зависимости
npm install

# 2. Запусти dev сервер
npm run dev

# 3. Следуй инструкции в docs/QUICK_START.md (5 минут!)
```

**Готово!** Адаптивная система уже работает. Просто добавь несколько строк в App.tsx.

📖 **Документация**:
- **[FOR_AGENTS.md](FOR_AGENTS.md)** - ⭐ главное руководство для AI-агентов
- **[docs/QUICK_START.md](docs/QUICK_START.md)** - интеграция за 5 минут
- **[docs/IMPLEMENTATION_GUIDE.md](docs/IMPLEMENTATION_GUIDE.md)** - полная документация
- **[docs/SYSTEM_SUMMARY.md](docs/SYSTEM_SUMMARY.md)** - обзор системы

### Вариант 2: Стандартный запуск

```bash
# Клонируй репозиторий
npm install

# Запуск в режиме разработки
npm run dev
```

### Структура проекта

```
src/
├── components/                      # React компоненты
│   ├── ui/                         # shadcn/ui компоненты
│   ├── AdaptiveLessonViewer.tsx   # 🔥 NEW: Просмотр адаптивного урока
│   ├── ModuleGrid.tsx              # Сетка модулей
│   ├── CheckInPanel.tsx            # Ежедневный чек-ин
│   ├── BadgeGrid.tsx               # Система достижений
│   └── ProgressStats.tsx           # Статистика прогресса
├── lib/                            # 🔥 NEW: Бизнес-логика
│   ├── adaptiveLearning.ts        # Адаптивный движок
│   └── gamification.ts            # Система геймификации
├── data/                           # Данные и контент
│   ├── boundariesModule.ts        # 🔥 NEW: Модуль "Личные границы" (9 уроков)
│   ├── moduleData.ts              # 12 модулей
│   └── teenContent.ts             # Практики для подростков
├── App.tsx                         # Главный компонент
└── index.css                       # Стили и тема
```

## 🧠 Архитектура адаптивного обучения

### Как работает адаптивный движок?

```typescript
Чек-ин (настроение, тревога, сон, энергия)
         ↓
  Анализ состояния
         ↓
  ┌──────────────────────────────────┐
  │ Эмоциональное состояние         │
  │ - Stability (stable/volatile)   │
  │ - Capacity (low/medium/high)    │
  │ - Needs support?                │
  └──────────────────────────────────┘
         ↓
  ┌──────────────────────────────────┐
  │ Когнитивная нагрузка            │
  │ - Время дня                     │
  │ - Недавние уроки                │
  │ - Качество сна                  │
  └──────────────────────────────────┘
         ↓
  ┌──────────────────────────────────┐
  │ Уровень мастерства              │
  │ - Завершенные уроки             │
  │ - Результаты тестов             │
  │ - Постоянство (streak)          │
  └──────────────────────────────────┘
         ↓
  Подбор оптимального урока
  + адаптации (формат, длина)
         ↓
  Урок → Тест → Практика → XP/Badges
         ↓
  Обновление эмоциональных метрик
         ↓
  Следующий урок (с учетом изменений)
```

### Научная база

- **Google Learn Your Way** - персонализация и гибкость
- **Khan Academy** - mastery learning, Bayesian Knowledge Tracing
- **Duolingo** - микро-обучение, геймификация, streak
- **Headspace** - mindfulness для подростков
- **Vygotsky ZPD** - обучение на уровень выше текущего
- **Ebbinghaus** - spaced repetition

### Ключевые фичи

🎯 **Emotion-aware**: Первая в мире система, учитывающая эмоции в реальном времени  
🧩 **Multiple formats**: 5 форматов урока (текст, видео, аудио, интерактив, mindmap)  
💖 **Forgiving**: Не наказывает за пропуски (streak freeze)  
🎮 **Psychologically-informed gamification**: XP + эмоциональные бейджи  
📊 **Wellness Score**: Холистическая метрика прогресса

## 📱 Интеграция с Telegram

Приложение предназначено для работы как Telegram WebApp:

1. **Telegram Bot** создает приватные групповые чаты для когорт
2. **WebApp** запускается через команду бота или кнопку в интерфейсе
3. **Уведомления** приходят через бота (напоминания, SOS-сигналы)
4. **Аутентификация** через Telegram Login Widget

### Основные команды бота

- `/start` - знакомство и запуск WebApp
- `/profile` - профиль пользователя
- `/join` - записаться в когорту
- `/schedule` - расписание встреч
- `/sos` - экстренная помощь

## 🎨 Дизайн-система

### Цветовая палитра

- **Primary** (основной): Deep teal для доверия и стабильности
- **Secondary** (вторичный): Soft blues для поддерживающих элементов  
- **Accent** (акцент): Warm orange для CTA и позитивной обратной связи
- **Destructive** (критический): Soft red для SOS и экстренных ситуаций

### Принципы UI

- **Минимализм**: фокус на контенте, щедрые отступы
- **Безопасность**: мягкие цвета, избегание триггеров
- **Доступность**: WCAG AA контрастность, крупные touch-таргеты
- **Mobile-first**: адаптация под телефоны подростков

## 📊 Данные и персистентность

### Persistent State (useKV)

```typescript
import { useKV } from '@github/spark/hooks'

// Данные, которые должны сохраняться между сессиями
const [userProfile, setUserProfile] = useKV('user-profile', defaultProfile)
const [userBadges, setUserBadges] = useKV('user-badges', [])
const [lastCheckIn, setLastCheckIn] = useKV('last-checkin', null)
```

### Temporary State (useState)

```typescript
import { useState } from 'react'

// Временные данные UI
const [activeTab, setActiveTab] = useState('dashboard')
const [selectedModule, setSelectedModule] = useState(null)
const [isLoading, setIsLoading] = useState(false)
```

## 🏗 Архитектура модулей

Каждый модуль состоит из:

### 3 недели × 3 компонента

1. **Видео** (5-7 мин) - основные концепции
2. **Практика** (10-15 мин) - интерактивные упражнения  
3. **Рефлексия** (3-5 вопросов) - закрепление опыта

### Примеры модулей

- **Уверенность**: сильные стороны → внутренний критик → смелые шаги
- **Дружба**: эмпатия → границы → здоровые компании  
- **Стресс-менеджмент**: дыхание 4-7-8 → квадратное дыхание → телесные техники

## 🛡 Безопасность и модерация

### Защита подростков

- **Фильтрация контента**: автоматическое выявление тревожных сообщений
- **SOS-система**: мгновенные уведомления кураторов при кризисе
- **Эскалация**: протокол связи с психологами и экстренными службами
- **Приватность**: минимум данных, шифрование, согласие родителей

### Роли и доступы

- **Teen**: участник программы
- **Curator**: модератор групп, первичная поддержка
- **Psychologist**: ментор, ведение встреч, кризисное вмешательство
- **Parent**: согласие, высокоуровневые отчеты (без переписки)
- **Admin**: управление программами и метрики

## 🎮 Геймификация

### Система наград

- **Первый шаг** 🌟 - регистрация в программе
- **Неделя осознанности** 📅 - 7 дней чек-инов подряд
- **Месяц заботы** 🏆 - 30 дней чек-инов подряд
- **Целеустремленный** ✅ - завершение первого модуля
- **Исследователь** 🔍 - завершение 3 модулей
- **Помощник** 🤝 - поддержка товарища
- **Смелый** 💪 - активность в групповых обсуждениях
- **Осознанный** 🧘‍♀️ - 50 практик осознанности

### Мотивационные элементы

- **Серии дней** (streaks) - мотивация к регулярности
- **Прогресс-бары** - визуализация достижений
- **Групповая статистика** - мягкое соревнование
- **Персональные insights** - анализ прогресса

## 📈 Аналитика и метрики

### Ключевые показатели

- **Engagement**: % завершения модулей, частота чек-инов
- **Wellbeing**: динамика настроения и тревожности
- **Social**: активность в группах, взаимная поддержка
- **Safety**: время ответа на SOS, количество эскалаций

## 🔮 Планы развития

### MVP (текущая версия)
- ✅ 12 модулей с русскоязычным контентом
- ✅ Базовая геймификация и чек-ины
- ✅ SOS-система и безопасность
- ✅ Telegram WebApp интеграция

### v2.0 (следующие этапы)
- 🔄 Полноценный Telegram Bot
- 🔄 API для кураторов и админов
- 🔄 Групповые видеозвонки
- 🔄 Персонализированные рекомендации

### v3.0 (масштабирование)
- 📋 Native iOS/Android приложения
- 📋 Многоязычность (EN, UK, др.)
- 📋 Интеграция со школами
- 📋 White-label для партнеров

## 🤝 Участие в разработке

Приложение создано для реального использования подростками. При внесении изменений учитывай:

1. **Безопасность прежде всего** - любые изменения должны быть безопасны для уязвимой аудитории
2. **Простота использования** - интерфейс должен быть интуитивен для 13-18 лет
3. **Научная обоснованность** - практики основаны на доказательной психологии
4. **Культурная адаптация** - контент адаптирован под российский контекст

## 📞 Контакты и поддержка

- **Продукт**: [email] (вопросы по функциональности)
- **Техническая поддержка**: [email] (баги и предложения)
- **Психологическая экспертиза**: [email] (контент и безопасность)

---

*DA Teens - путь к благополучию в безопасной и поддерживающей среде* 💙