# üéØ –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê –ò –†–ï–®–ï–ù–ê

## –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?

**–û—à–∏–±–∫–∞:** `useMergeRef: Cannot read properties of undefined (reading 'useLayoutEffect')`

**–ü—Ä–∏—á–∏–Ω–∞:** –£–¥–∞–ª–∏–ª–∏ `import "@github/spark/spark"` –∏–∑ `main.tsx` –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è –µ–≥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ–ª–∏.

## –ß—Ç–æ –¥–µ–ª–∞–ª @github/spark/spark?

–≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–ª–∞ **—Å–∫—Ä—ã—Ç—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é**:

1. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∞ `React` –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (`window.React`)
2. ‚úÖ –°–æ–∑–¥–∞–≤–∞–ª–∞ –µ–¥–∏–Ω—ã–π React –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. ‚úÖ –ü–æ–∑–≤–æ–ª—è–ª–∞ Radix UI –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π React

–ö–æ–≥–¥–∞ –≤—ã —É–¥–∞–ª–∏–ª–∏ —ç—Ç—É —Å—Ç—Ä–æ–∫—É:
- ‚ùå Radix UI –ø–æ—Ç–µ—Ä—è–ª –¥–æ—Å—Ç—É–ø –∫ React
- ‚ùå `useMergeRef` –ø—ã—Ç–∞–ª—Å—è –≤—ã–∑–≤–∞—Ç—å `React.useLayoutEffect`, –Ω–æ –ø–æ–ª—É—á–∏–ª `undefined`
- ‚ùå Production build –ø–∞–¥–∞–ª —Å white screen

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω **`src/lib/react-init.ts`** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–º–µ–Ω–∞ –¥–ª—è Spark –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

```typescript
import * as React from 'react'
import * as ReactDOM from 'react-dom'

if (typeof window !== 'undefined') {
  ;(window as any).React = React
  ;(window as any).ReactDOM = ReactDOM
}
```

–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ `main.tsx`:
```typescript
import './lib/react-init' // ‚Üê –ó–∞–º–µ–Ω–∞ –¥–ª—è @github/spark/spark
```

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Å—Ç–∞—Ç—å—Å—è –Ω–∞ —Ä–∞–±–æ—á–µ–º –∫–æ–º–º–∏—Ç–µ (–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï)
- ‚úÖ –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç @github/spark –æ—Å—Ç–∞—ë—Ç—Å—è
- ‚ùå –ü–æ—Ç–µ—Ä—è–Ω—ã —Ñ–∏—á–∏ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –¥–Ω–µ–π

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ `docs/SPARK_MIGRATION_GUIDE.md`
2. –í–µ—Ä–Ω—É—Ç—å –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Ñ–∏—á–∏ (haptic feedback, compact mode, docs)
3. –î–µ–ø–ª–æ–∏—Ç—å —á–∏—Å—Ç—É—é –≤–µ—Ä—Å–∏—é –±–µ–∑ Spark

## üìÑ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`src/lib/react-init.ts`** ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è React –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
2. **`docs/SPARK_MIGRATION_GUIDE.md`** ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

## üéì –£—Ä–æ–∫–∏

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è–π—Ç–µ –∏–º–ø–æ—Ä—Ç—ã**, –Ω–µ –ø–æ–Ω–∏–º–∞—è –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
2. **–°–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç—ã –∏–º–ø–æ—Ä—Ç–æ–≤** (`import "package"`) –º–æ–≥—É—Ç –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–º–∏
3. **–°—Ç–∞—Ä—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** (Radix UI) –º–æ–≥—É—Ç –æ–∂–∏–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π React
4. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚â† Production** ‚Äî –≤—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ production build

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏?

–°–∫–∞–∂–∏—Ç–µ:
- **"–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é"** ‚Äî —è –ø—Ä–æ–≤–µ–¥—É –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é —Å Spark
- **"–û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å"** ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ç–µ–∫—É—â–µ–µ —Ä–∞–±–æ—á–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **"–û–±—ä—è—Å–Ω–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ"** ‚Äî —Ä–∞—Å—Å–∫–∞–∂—É –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π
